# numu_run1_test.yaml

# Output directory
output_dir: "./output_numu_run3_1mil_detsys/"

# Maximum events to process (set to -1 for all events)
max_events: -1

# Filter out failed events from output tree
filter_events: True

# Enable producer-first mode
producer_first_mode: True

# Print producer dependency graph
print_dependency_graph: true

# Dataset configuration
datasets:
  folders:
#    - /cluster/tufts/wongjiradlabnu/twongj01/gen2/photon_analysis/lantern_ana/studies/numu_cc_inclusive/output_numu_run3b_1mil/
    - ../numu_cc_inclusive/output_numu_run3b_1mil/
  mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil:  
    type: RootDataset
    tree: analysis_tree
    ismc: true
    process: true
    filepaths:
      - mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_20260118_150324.root

# Producer configuration (producers run first)
producers:
  detsys_cv1mil:
    type: UBDetSysProducer
    config:
      variations_to_include:
        - LYAtt
        - LYDown
        - LYRayleigh
        - wiremodX
        - wiremodYZ
        - wiremodThetaXZ
        - wiremodThetaYZ        
      run: eventindex_run
      subrun: eventindex_subrun
      event: eventindex_event
      central_value_dataset: mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil
      variation_rootfiles:
#twongj01@p1cmp075:/cluster/tufts/wongjiradlabnu/twongj01/gen2/photon_analysis/lantern_ana/studies/numu_cc_inclusive$ ls -1 output_numu_run3b_1mil/*.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_20260118_150324.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_LYAtt_20260118_152204.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_LYDown_20260118_182229.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_LYRayleigh_20260118_184136.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodThetaXZ_20260118_194106.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodThetaYZ_20260118_195923.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodX_20260118_190138.root
#output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodYZ_20260118_192159.root
        LYAtt:      ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_LYAtt_20260118_152204.root
        LYDown:     ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_LYDown_20260118_182229.root
        LYRayleigh: ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_LYRayleigh_20260118_184136.root
        wiremodX:   ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodX_20260118_190138.root
        wiremodYZ:  ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodYZ_20260118_192159.root
        wiremodThetaXZ: ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodThetaXZ_20260118_194106.root
        wiremodThetaYZ: ../numu_cc_inclusive/output_numu_run3b_1mil/mcc9_v29e_dl_run3b_bnb_nu_overlay_1mil_wiremodThetaYZ_20260118_195923.root
      variation_treename: analysis_tree
      cut_formulas:
        pass_vertex: "{ntuple.vertex_properties_found}==1 and {ntuple.vertex_properties_infiducial}==1"
        pass_muon: "{ntuple.muon_properties_pid_score}>-0.9 and {ntuple.muon_properties_energy}>0.0"
      event_selection_critera: ['pass_vertex','pass_muon']
      bin_config:
        visible_energy:
          formula: visible_energy
          numbins: 30
          minvalue: 0.0
          maxvalue: 3000.0
          applicable_variations:
           - 'LYAtt'

# Cut configuration
#cuts: 
#  remove_true_nue_cc:
#    applyto:
#     - run1_bnb_nu_overlay_mcc9_v28_wctagger
#
#cut_logic: "(not {remove_true_nue_cc})"

