# numu_cc_analysis_config.yaml

# Output directory
output_dir: "./run4_mmr/run4_outputs"

# Maximum events to process (set to -1 for all events)
max_events: -1

# Filter out failed events from output tree
filter_events: True

# Print producer dependency graph
print_dependency_graph: true

# Dataset configuration
datasets:
  folders:
    # - /cluster/tufts/wongjiradlabnu/zimani01/lantern_data/
    # - /cluster/tufts/wongjiradlabnu/zimani01/lantern_data/v3dev_reco_retune/
    - /exp/uboone/data/users/imani/nutples/
    - /exp/uboone/data/users/imani/nutples/v3dev_reco_retune/
    - /exp/uboone/data/uboonepro/MCC9.10/liangliu/v10_04_07_09/

  ## Run4 Nue Overlay 
  run4_bnb_nue_overlay:
    type: RootDataset
    tree: lantern/EventTree
    ismc: true
    process: true
    filepaths:
    #  - dlgen2_reco_v2me06_ntuple_v5_mcc9_v28_wctagger_nueintrinsics.root
     - MCC9.10_Run4b_v10_04_07_09_BNB_nu_overlay_surprise_reco2_hist.root

  ## Run4 Nu Overlay 
  run4_bnb_nu_overlay:
    type: RootDataset
    tree: lantern/EventTree
    ismc: true
    process: true 
    filepaths:
    #  - dlgen2_reco_v2me06_ntuple_v5_mcc9_v28_wctagger_bnboverlay.root
      - MCC9.10_Run4b_v10_04_07_09_BNB_nue_overlay_surprise_reco2_hist.root

  ##
  run4_ext_bnb:
    type: RootDataset
    tree: lantern/EventTree
    ismc: false
    process: true
    filepaths:
    # - dlgen2_reco_v2me06_ntuple_v5_mcc9_v29e_dl_run1_C1_extbnb.root
      - MCC9.10_Run4b_v10_04_07_09_Run4b_BNB_beam_off_surprise_reco2_hist.root
      
  ## Run4 Data 
  run4_data:
    type: RootDataset
    tree: lantern/EventTree
    ismc: false
    process: true
    filepaths:
    # - dlgen2_reco_v2me05_ntuple_v5_mcc9_v28_wctagger_bnb5e19.root
    - MCC9.10_Run4b_v10_04_07_10_BNB_beam_on_surprise_mix_makeups.root

# Producer configuration
producers:

  ## True neutrino properties 
  # trueNu:
  #   type: trueNuPropertiesProducer
  #   config: {}

  ## MC event weight  
  eventweight:
    type: eventWeightProducer
    config: {}

  ## Numu MMR Cuts
  numuIncCC:
    type: numuIncCCProducer
    config: {}

  ## Nue MMR Cuts
  nueIncCC:
    type: nueIncCCProducer
    config: {}
      # cosmic_fraction_threshold: 1.0
      # muon_score_threshold: -3.7
      # electron_confidence_threshold: 7.1 
  
  nue_selection_result:
    type: CutResultProducer
    config:
      cutname: remove_true_nue_cc

# Cut configuration
cuts:
  # Remove true nue CC events (based on MC truth)
  remove_true_nue_cc:
    applyto:
      - run4_bnb_nu_overlay

cut_logic: "not {remove_true_nue_cc}"
